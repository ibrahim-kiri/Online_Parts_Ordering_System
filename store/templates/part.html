{% extends 'base.html' %}
{% block content %}

<!-- content -->
<section class="py-5">
    <div class="container">
        <div class="row gx-5">
            <aside class="col-lg-6">
                <div class="border rounded-4 mb-3 d-flex justify-content-center">
                    <img style="max-width: 100%; max-height: 100vh; margin: auto;" class="img-fluid rounded-4 fit"
                        src="{{ part.image.url }}" />
                </div>
                <!-- gallery-wrap .end// -->
            </aside>
            <main class=" col-lg-6">
                <div class="ps-lg-3">
                    <h4 class="title text-dark">
                        {{ part.name }}
                    </h4>
                    <div class="d-flex flex-row my-3">
                        <div class="text-warning mb-1 me-2">
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fa fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                            <span class="ms-1">
                                4.5
                            </span>
                        </div>
                        <span class="text-muted"><i class="fas fa-shopping-basket fa-sm mx-1"></i>154
                            orders</span>
                        <span class="text-success ms-2">In stock</span>
                    </div>

                    <div class="mb-3">
                        {% if part.is_sale %}
                        <!-- Sale -->
                        <div class="d-flex justify-content-start small text-warning mb-2">
                            <div class="bi-star-fill"></div>
                            &nbsp;&nbsp;Sale!&nbsp;&nbsp;
                            <div class="bi-star-fill"></div>
                        </div>

                        <!-- Part price -->
                        <span class="h5"><strike>{{ part.price }}/-</strike></span> &nbsp;
                        <span class="h5">{{ part.sale_price }}/-</span>
                        {% else %}
                        <span class="h5">{{ part.price }}/-</span>
                        <br />
                        {% endif %}
                    </div>

                    <p>{{ part.description }}</p>

                    <hr />

                    <div class="row mb-4">
                        <div class="col-md-4 col-6">
                            <label class="mb-2">Quantity</label>
                            <select class="form-select border border-secondary" id="qty-cart"
                                style="height: 35px; width: 100px;">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                        </div>
                        <!-- col.// -->
                    </div>
                    <a href="{% url 'home' %}" class="btn btn-secondary">Go Back</a>
                    <button type="button" value="{{ part.id }}" class="btn btn-primary" id="add-cart"><i
                            class="me-1 fa fa-shopping-basket"></i> Add
                        to cart</button>
                    <a href="#" class="btn btn-light border border-secondary py-2 icon-hover px-3"> <i
                            class="me-1 fa fa-heart fa-lg"></i> Save </a>
                </div>
            </main>
        </div>
    </div>
</section>
<!-- content -->

<section class="bg-light border-top py-4">
    <div class="container">
        <div class="row gx-4">
            <div class="col-lg-8 mb-4">
                <div class="border rounded-2 px-3 py-2 bg-white">
                    <!-- Pills navs -->
                    <ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
                        <li class="nav-item d-flex" role="presentation">
                            <a class="nav-link d-flex align-items-center justify-content-center w-100 active"
                                id="ex1-tab-1" data-mdb-toggle="pill" href="#ex1-pills-1" role="tab"
                                aria-controls="ex1-pills-1" aria-selected="true">Specification</a>
                        </li>
                        <li class="nav-item d-flex" role="presentation">
                            <a class="nav-link d-flex align-items-center justify-content-center w-100" id="ex1-tab-2"
                                data-mdb-toggle="pill" href="#ex1-pills-2" role="tab" aria-controls="ex1-pills-2"
                                aria-selected="false">Warranty info</a>
                        </li>
                        <li class="nav-item d-flex" role="presentation">
                            <a class="nav-link d-flex align-items-center justify-content-center w-100" id="ex1-tab-3"
                                data-mdb-toggle="pill" href="#ex1-pills-3" role="tab" aria-controls="ex1-pills-3"
                                aria-selected="false">Shipping info</a>
                        </li>
                    </ul>
                    <!-- Pills navs -->

                    <!-- Pills content -->
                    <div class="tab-content" id="ex1-content">
                        <div class="tab-pane fade show active" id="ex1-pills-1" role="tabpanel"
                            aria-labelledby="ex1-tab-1">
                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ullam sed labore harum quae
                                debitis qui autem, aliquid necessitatibus id, ipsa in eum quasi. Tempora, aliquid odit
                                possimus ea mollitia aliquam molestiae iusto sequi voluptate optio consequuntur quia quo
                                repudiandae ex, ipsa asperiores, blanditiis a quaerat sapiente! Ad iste illum ipsum?
                            </p>
                            <div class="row mb-2">
                                <div class="col-12 col-md-6">
                                    <ul class="list-unstyled mb-0">
                                        <li><i class="fas fa-check text-success me-2"></i>Some great feature name here
                                        </li>
                                        <li><i class="fas fa-check text-success me-2"></i>Lorem ipsum dolor sit amet,
                                            consectetur</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Duis aute irure dolor in
                                            reprehenderit</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Optical heart sensor</li>
                                    </ul>
                                </div>
                                <div class="col-12 col-md-6 mb-0">
                                    <ul class="list-unstyled">
                                        <li><i class="fas fa-check text-success me-2"></i>Easy fast and ver good</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Some great feature name here
                                        </li>
                                        <li><i class="fas fa-check text-success me-2"></i>Modern style and design</li>
                                    </ul>
                                </div>
                            </div>
                            <table class="table border mt-3 mb-2">
                                <tr>
                                    <th class="py-2">Lorem:</th>
                                    <td class="py-2">Lorem ipsum dolor sit amet consectetur.</td>
                                </tr>
                                <tr>
                                    <th class="py-2">Lorem:</th>
                                    <td class="py-2">Lorem ipsum dolor sit amet consectetur.</td>
                                </tr>
                                <tr>
                                    <th class="py-2">Lorem:</th>
                                    <td class="py-2">Lorem ipsum dolor sit amet consectetur.</td>
                                </tr>
                                <tr>
                                    <th class="py-2">Lorem</th>
                                    <td class="py-2">Lorem ipsum dolor sit amet consectetur.</td>
                                </tr>
                                <tr>
                                    <th class="py-2">Lorem</th>
                                    <td class="py-2">Lorem ipsum dolor sit amet consectetur.</td>
                                </tr>
                            </table>
                        </div>
                        <div class="tab-pane fade mb-2" id="ex1-pills-2" role="tabpanel" aria-labelledby="ex1-tab-2">
                            Tab content or sample information now <br />
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt
                            ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                            laboris nisi ut
                            aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit
                            esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident,
                            sunt in culpa qui
                            officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur
                            adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
                            ad minim veniam, quis
                            nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                        </div>
                        <div class="tab-pane fade mb-2" id="ex1-pills-3" role="tabpanel" aria-labelledby="ex1-tab-3">
                            Another tab content or sample information now <br />
                            Dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et
                            dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
                            ut aliquip ex ea
                            commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum
                            dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
                            culpa qui officia deserunt
                            mollit anim id est laborum.
                        </div>
                    </div>
                    <!-- Pills content -->
                </div>
            </div>
            <div class="col-lg-4">
                <div class="px-0 border rounded-2 shadow-0">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Similar items</h5>
                            <div class="d-flex mb-3">
                                <a href="#" class="me-3">
                                    <img src="{{ part.image.url }}" style="min-width: 96px; height: 96px;"
                                        class="img-md img-thumbnail" />
                                </a>
                                <div class="info">
                                    <a href="#" class="nav-link mb-1">
                                        {{ part.name }}
                                    </a>
                                    <strong class="text-dark"> {{ part.price }}/-</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // Check if button pressed
    $(document).on('click', '#add-cart', function (e) {
        e.preventDefault();
        $.ajax({
            type: 'POST',
            url: '{% url "cart_add" %}',
            data: {
                part_id: $('#add-cart').val(),
                part_qty: $('#qty-cart option:selected').text(),
                csrfmiddlewaretoken: '{{ csrf_token }}',
                action: 'post'
            },

            success: function (json) {
                // console.log(json)
                document.getElementById("cart_quantity").
                    textContent = json.qty
                location.reload();
            },

            error: function (xhr, errmsg, err) {

            },
        });
    })
</script>
{% endblock %}